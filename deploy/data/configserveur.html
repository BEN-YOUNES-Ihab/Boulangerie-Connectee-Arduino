<!-- BEN YOUNES IHAB -->
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<!DOCTYPE html>
<html lang="fr">
<head>
<title>ESP-12</title>

<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet" href="config.css">
</head>
<body>


<header>
  <h3>ESP-12</h3>

</header>

<section>
  <div class="topnav" id="myTopnav"> 
    <a style="width: 8%;" href="home.html">Accueil</a>
    <div class="dropdown">
        <button class="dropbtn">Configuration 
            <i class="fa fa-caret-down"></i>
        </button>
        <div class="dropdown-content">
          <a href="configwifi.html" >Configuration WIFI </a>
          <a href="config.html" >Configuration réseaux </a>
          <a href="configserveur.html" >Changer l'adresse IP du serveur</a> 
        </div>
    </div> 
        <a class="active" href="configcompte.html">Paramètres du compte</a> 
        <a href="javascript:void(0);" style="font-size:15px;" class="icon" onclick="myFunction()">&#9776;</a>
  </div >
  <article>
    <h2>Changer l'adresse IP du serveur</h2>
    <hr class="hr2">
    <div class="configipsquare">
      <div class="material-textfield">
        <form method='get' action='ipserveur'>
        <input class="input" type="text" placeholder=" " id="servip" value="" maxlength="30" name="ipserv" required>
        <label class="labeldesign" >Adresse IP</label>
      </div>
      <p>
        <span style="color: red;" id="error"></span>
      </p>
      <input class="button" type='submit' value="Valider"></form>
    </div>
  </article>
  <script>
    function myFunction() {
      var x = document.getElementById("myTopnav");
      if (x.className === "topnav") {
        x.className += " responsive";
      } else {
        x.className = "topnav";
      }
    }
    setInterval(function ( ) {
    var xhttp = new XMLHttpRequest();
    xhttp.onreadystatechange = function() {
      if (this.readyState == 4 && this.status == 200) {
        document.getElementById("error").innerHTML = this.responseText;
      }
    };
    xhttp.open("GET", "/error", true);
    xhttp.send();
  }, 10 ) ;
 
    var xhttp = new XMLHttpRequest();
    xhttp.onreadystatechange = function() {
      if (this.readyState == 4 && this.status == 200) {
        document.getElementById("servip").value = this.responseText;
      }
    };
    xhttp.open("GET", "/servip", true);
    xhttp.send();

  </script>
</section>

<footer>
  <p class="pfooter">Projet boulangerie connectée © 2020/2021</p>
</footer>

</body>
</html>
